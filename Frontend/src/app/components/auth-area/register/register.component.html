<div>
    <h2>Register</h2>

    <form #registerForm="ngForm" (ngSubmit)="submit()">
        
        <form class="step1" #step1="ngForm" (submit)="nextStep()" [ngClass]="{'step-no-show': step===2}">
            <div class="fields">
                
                <p>Step 1</p>
                
                <mat-form-field appearance="outline" >
                    <mat-label>First Name: </mat-label>
                    <input #firstName="ngModel" matInput type="text" name="firstName" [(ngModel)]="user.firstName" required minlength="2" maxlength="10" >
                </mat-form-field>
                <app-validation-error-handler [fieldName]="firstName" minLength="2" maxLength="10"></app-validation-error-handler>
        
                <mat-form-field appearance="outline" >
                    <mat-label>Last Name: </mat-label>
                    <input #lastName="ngModel" matInput type="text" name="lastName" [(ngModel)]="user.lastName" required minlength="2" maxlength="15">
                </mat-form-field>
                <app-validation-error-handler [fieldName]="lastName" minLength="2" maxLength="15"></app-validation-error-handler>
                
                <mat-form-field appearance="outline" >
                    <mat-label>Username: </mat-label>
                    <input #username="ngModel" matInput type="text" name="username" [(ngModel)]="user.username" required minlength="3" maxlength="15" >
                </mat-form-field>
                <app-validation-error-handler [fieldName]="username" minLength="3" maxLength="15"></app-validation-error-handler>
                
                <mat-form-field appearance="outline" >
                    <mat-label>Password: </mat-label>
                    <input #password="ngModel" matInput type="password" name="password" [(ngModel)]="user.password" required minlength="4" >
                </mat-form-field>
                <app-validation-error-handler [fieldName]="password" minLength="4"></app-validation-error-handler>
        
            </div>
            <button  [disabled]="step1.invalid">NEXT</button>
        </form>
        
        <div class="step2"  [ngClass]="{'step-no-show': step===1}">
            <div class="fields">
                
                <p>Step 2</p>
                <mat-form-field appearance="outline">
                    <mat-label>City: </mat-label>
                    <mat-select #city="ngModel" name="city" [(ngModel)]="user.cityId" required >
                        <mat-option *ngFor="let city of cities" [value]="city._id">{{city.name}}</mat-option>
                    </mat-select>
                </mat-form-field>
                <app-validation-error-handler [fieldName]="city" minLength="4"></app-validation-error-handler>
                
                <mat-form-field appearance="outline" >
                    <mat-label>Street: </mat-label>
                    <input #street="ngModel" matInput type="text" name="street" [(ngModel)]="user.street" required >
                </mat-form-field>
                <app-validation-error-handler [fieldName]="street" minLength="4"></app-validation-error-handler>
                
                <mat-form-field appearance="outline" >
                    <mat-label>Email: </mat-label>
                    <input #email="ngModel" matInput type="text" name="email" [(ngModel)]="user.email" required [pattern]="emailRegex" >
                </mat-form-field>
                <app-validation-error-handler [fieldName]="email" minLength="4"></app-validation-error-handler>
        
            </div>
            <button type="button" (click)="previous()">BACK</button>
            
            <button type="submit" [disabled]="registerForm.invalid">REGISTER</button>
        </div>

    </form>

</div>